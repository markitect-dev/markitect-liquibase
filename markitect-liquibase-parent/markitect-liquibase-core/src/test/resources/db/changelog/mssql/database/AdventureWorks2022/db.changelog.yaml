databaseChangeLog:
  - preConditions:
      - dbms:
          type: mssql
      - connectionCatalog:
          catalogName: AdventureWorks2022

  - changeSet:
      id: 1
      author: markitect
      changes:
        - createSchema:
            schemaName: Person
        - modifySql:
            append:
              value: " AUTHORIZATION dbo"

  - changeSet:
      id: 2
      author: markitect
      changes:
        - createTable:
            schemaName: Person
            tableName: Address
            tablespace: PRIMARY
            columns:
              - column:
                  name: AddressID
                  type: int
                  autoIncrement: true
                  constraints:
                    nullable: false
              - column:
                  name: AddressLine1
                  type: nvarchar(60)
                  constraints:
                    nullable: false
              - column:
                  name: AddressLine2
                  type: nvarchar(60)
                  constraints:
                    nullable: true
              - column:
                  name: City
                  type: nvarchar(30)
                  constraints:
                    nullable: false
              - column:
                  name: StateProvinceID
                  type: int
                  constraints:
                    nullable: false
              - column:
                  name: PostalCode
                  type: nvarchar(15)
                  constraints:
                    nullable: false
              - column:
                  name: SpatialLocation
                  type: geography
                  constraints:
                    nullable: true
              - column:
                  name: rowguid
                  type: uniqueidentifier
                  defaultValueConstraintName: DF_Address_rowguid
                  defaultValueComputed: NEWID()
                  constraints:
                    nullable: false
              - column:
                  name: ModifiedDate
                  type: datetime
                  defaultValueConstraintName: DF_Address_ModifiedDate
                  defaultValueComputed: GETDATE()
                  constraints:
                    nullable: false
        - modifySql:
            regExpReplace:
              replace: IDENTITY \(1, 1\)
              with: $0 NOT FOR REPLICATION
        - modifySql:
            regExpReplace:
              replace: uniqueidentifier
              with: $0 ROWGUIDCOL
        - modifySql:
            regExpReplace:
              replace: (ON )(PRIMARY)
              with: $1[$2]

  - changeSet:
      id: 3
      author: markitect
      changes:
        - addPrimaryKey:
            schemaName: Person
            tableName: Address
            constraintName: PK_Address_AddressID
            columnNames: AddressID
            tablespace: PRIMARY
        - modifySql:
            regExpReplace:
              replace: (ON )(PRIMARY)
              with: $1[$2]

  - changeSet:
      id: 4
      author: markitect
      changes:
        - setTableRemarks:
            schemaName: Person
            tableName: Address
            remarks: Street address information for customers, employees, and vendors.
      rollback:
  - changeSet:
      id: 5
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: AddressID
            remarks: Primary key for Address records.
      rollback:
  - changeSet:
      id: 6
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: AddressLine1
            remarks: First street address line.
      rollback:
  - changeSet:
      id: 7
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: AddressLine2
            remarks: Second street address line.
      rollback:
  - changeSet:
      id: 8
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: City
            remarks: Name of the city.
      rollback:
  - changeSet:
      id: 9
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: StateProvinceID
            remarks: Unique identification number for the state or province. Foreign key to StateProvince table.
      rollback:
  - changeSet:
      id: 10
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: PostalCode
            remarks: Postal code for the street address.
      rollback:
  - changeSet:
      id: 11
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: SpatialLocation
            remarks: Latitude and longitude of this address.
      rollback:
  - changeSet:
      id: 12
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: rowguid
            remarks: Latitude and longitude of this address.
      rollback:
  - changeSet:
      id: 13
      author: markitect
      changes:
        - setColumnRemarks:
            schemaName: Person
            tableName: Address
            columnName: ModifiedDate
            remarks: Date and time the record was last updated.
      rollback:

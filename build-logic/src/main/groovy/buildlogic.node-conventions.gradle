plugins {
    id 'com.github.node-gradle.node'
}

configurations  {
    verification
}

dependencies {
    verification "org.nodejs:node:${libs.versions.node.get()}:darwin-arm64@tar.gz"
    verification "org.nodejs:node:${libs.versions.node.get()}:darwin-x64@tar.gz"
    verification "org.nodejs:node:${libs.versions.node.get()}:linux-arm64@tar.gz"
    verification "org.nodejs:node:${libs.versions.node.get()}:linux-x64@tar.gz"
    verification "org.nodejs:node:${libs.versions.node.get()}:win-arm64@zip"
    verification "org.nodejs:node:${libs.versions.node.get()}:win-x64@zip"
}

node {
    workDir = rootProject.layout.projectDirectory.dir('.gradle/nodejs')
    version = libs.versions.node.get()
    distBaseUrl = null
    download = true
    enableTaskRules = false
}

tasks.nodeSetup {
    enabled = project == rootProject
}

['npmInstall', 'npmSetup', 'pnpmInstall', 'pnpmSetup', 'yarn', 'yarnSetup'].each { name ->
    tasks.named(name) {
        enabled = false
    }
}
